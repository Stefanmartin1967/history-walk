# Instructions for AI Agents

This file contains critical information for AI agents working on this codebase. Please read it carefully before making any changes.

## 1. Data Source of Truth
*   **Official Circuits (`public/circuits/*.json`):** These files are **GENERATED ARTIFACTS**.
    *   **Do NOT edit them manually.**
    *   They are generated by the script `scripts/generate-circuit-index.js`.
    *   If you need to change the structure of the official circuit data (e.g., adding a new flag like `hasRealTrack`), **you must modify the script**, not the JSON file.
*   **Map Data (`public/*.geojson`):** These are the source of truth for POIs.

## 2. Critical Workflows
*   **Circuit Generation:** When a `.gpx` file is added to `public/circuits/[mapId]/`, the `generate-circuit-index.js` script must be run to update `public/circuits/[mapId].json`.
*   **Mobile vs Desktop:** The application has distinct logic for Mobile (list-based) and Desktop (map-based). Always check `src/mobile.js` when modifying UI logic to ensure responsiveness.

## 3. Common Pitfalls
*   **Tunnel Vision:** Do not look only at `src/`. Important logic for data generation lives in `scripts/`.
*   **Static Data Assumption:** Do not assume JSON files in `public/` are static. Always check if a script generates them.
